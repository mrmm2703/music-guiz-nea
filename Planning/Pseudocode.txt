PASSWORD = "elephant64"

FUNCTION END_GAME():
	PRINT("You got " + STR(POINTS) + " points.")
	SCOREBOARD = LOAD("Scoreboard.csv")
	TOP_FIVE = []
	N = 1
	WHILE(N < 6):
		HIGHEST = 0
		FOR RECORD IN SCOREBOARD:
			IF RECORD[1] > HIGHEST:
				HIGHEST = RECORD[1]
				INDEX = RECORD.INDEX()
		TOP_FIVE.APPEND(SCOREBOARD[INDEX])
		SCOREBOARD.REMOVE(INDEX)
		N = N + 1
	FOR X IN TOP_FIVE:
		PRINT STR(X[0]) + ": " STR(X[1]) + " points")
	NAME = INPUT("Enter your name: ")
	SCOREBOARD.INSERT(NAME, POINTS)
	SYSTEM.EXIT()

FUNCTION CLEAN(SONG_TO_CLEAN):
	RETURN SONG_TO_CLEAN.STRIP()

FUNCTION SONG_NAME_FORMATTED(SONG_TO_FORMAT):
	FINAL_STRING = ""
	WORDS = SONG_TO_FORMAT[0].SPLIT()
	FOR WORD IN WORDS:
		IND = 1
		FOR LETTER IN WORD:
			IF(IND == 1):
				FINAL_STRING = FINAL_STRING + LETTER
			ELSE:
				FINAL_STRING = FINAL_STRING + "_"
			IND ++
		FINAL_STRING = FINAL_STRING + " "
	RETURN FINAL_STRING

WHILE(TRUE):
	PASSWORD_ATTEMPT = INPUT("Enter password:")
	IF(PASSWORD_ATTEMPT == PASSWORD):
		BREAK
	ELSE:
		PRINT("Incorrect password.")

SONG_DB = LOAD("SongDB.csv")
POINTS = 0

WHILE(TRUE):
	SONG = []
	RAND_INDEX = RANDINT(0, SONG_DB.LENGTH - 1)
	SONG.APPEND(SONG_DB[RAND_INDEX][0])
	SONG.APPEND(SONG_DB[RAND_INDEX][1])
	TRIES = 1
	PRINT(SONG_NAME_FORMATTED(SONG))
	PRINT("By: " + SONG[1])
	WHILE(TRUE):
		SONG_ATTEMPT = INPUT("Enter the full song name:")
		SONG_ATTEMPT = CLEAN(SONG_ATTEMPT)
		IF(SONG_ATTEMPT == SONG[0]):
			IF(TRIES == 1):
				POINTS = POINTS + 3
				BREAK
			ELIF(TRIES == 2):
				POINTS = POINTS + 1
				BREAK
		ELSE:
			TRIES = TRIES + 1
			IF(TRIES > 2):
				END_GAME()
			ELSE:
				PASS